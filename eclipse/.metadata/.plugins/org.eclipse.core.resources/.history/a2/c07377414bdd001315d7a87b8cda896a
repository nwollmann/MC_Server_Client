package com.rpgcraft.item;

import net.minecraft.inventory.IInventory;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;

public class InventoryItem implements IInventory{
	public static final int INV_SIZE = 8; //inventory maximum size
	private ItemStack[] inventory = new ItemStack[INV_SIZE];
	private final ItemStack invItem; //provides NBT tag compound to reference
	
	public InventoryItem(ItemStack stack)
	{
		invItem = stack; //the stack this inventory belongs to
		
		if(!stack.hasTagCompound()){ //shouldn't matter - precaution nothing more
			stack.setTagCompound(new NBTTagCompound());
		}
		
		readFromNBT(stack.getTagCompound());
	}
	
	@Override
	public int getSizeInventory(){
		return inventory.length;
	}
	
	@Override
	public ItemStack getStackInSlot(int slot){
		return inventory[slot];
	}
	
	@Override
	public ItemStack decrStackSize(int slot, int amount){
		ItemStack stack = getStackInSlot(slot);
		if(stack != null && stack.stackSize > amount){
			stack = stack.splitStack(amount);
			markDirty();
		}else{
			setInventorySlotContents(slot, null);
		}
		return stack;
	}
	
	@Override
	public ItemStack getStackInSlotOnClosing(int slot){
		ItemStack stack = getStackInSlot(slot);
		if(stack != null) setInventorySlotContents(slot, null);
		return stack;
	}
	
	
}
